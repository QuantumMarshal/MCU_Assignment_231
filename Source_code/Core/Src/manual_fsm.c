/*
 * manual_fsm.c
 *
 *  Created on: Nov 28, 2023
 *      Author: Admin
 */


#include "manual_fsm.h"

void fsm_manual(){
	switch (led_status){
	case MAN_REDGREEN:
		onTFRed1();
		onTFGreen2();

		if (isButtonPressed(1) == 1){
			led_status = SET_RED;
		}

		if (isButtonPressed(2) == 1){
			led_status = MAN_REDYELLOW;
		}
		if (isButtonPressed(3) == 1){
			led_status = REDGREEN;

			timerRoad1 = redTime;
			timerRoad2 = greenTime;

			setTimer1(greenTime*100);
			setTimer2(100);
		}

		break;

	case MAN_REDYELLOW:
		onTFRed1();
		onTFYellow2();

		if (isButtonPressed(1) == 1){
			led_status = SET_RED;
		}

		if (isButtonPressed(2) == 1){
			led_status = MAN_GREENRED;
		}
		if (isButtonPressed(3) == 1){
			led_status = REDYELLOW;

			timerRoad1 = redTime;
			timerRoad2 = yellowTime;

			setTimer1(yellowTime*100);
			setTimer2(100);
		}

		break;

	case MAN_GREENRED:
		onTFGreen1();
		onTFRed2();

		if (isButtonPressed(1) == 1){
			led_status = SET_RED;
		}

		if (isButtonPressed(2) == 1){
			led_status = MAN_YELLOWRED;
		}
		if (isButtonPressed(3) == 1){
			led_status = GREENRED;

			timerRoad1 = greenTime;
			timerRoad2 = redTime;

			setTimer1(greenTime*100);
			setTimer2(100);
		}

		break;

	case MAN_YELLOWRED:
		onTFYellow1();
		onTFRed2();

		if (isButtonPressed(1) == 1){
			led_status = SET_RED;
		}

		if (isButtonPressed(2) == 1){
			led_status = MAN_REDGREEN;
		}
		if (isButtonPressed(3) == 1){
			led_status = YELLOWRED;

			timerRoad1 = yellowTime;
			timerRoad2 = redTime;

			setTimer1(yellowTime*100);
			setTimer2(100);
		}

		break;

	default:
		break;
	}
}
